{% extends 'base.html' %} {% block title %}Welcome Back{% endblock %} {%block
content%}

<div class="h1 mt-2 text-center font-monospace" style="color: #567174">
  Welcome back {{g.user.username}}
</div>
<!-- ********search form**************** -->
<div class="container mb-3" id="search-form">
  <form action="/search">
    <div class="row">
      <div class="mb-3 col-md-9">
        <input
          role="search"
          type="search"
          class="form-control form-control-lg"
          placeholder="Search for your next plant babyðŸŒ¿"
          name="q"
          aria-label="Search"
        />
      </div>
      <div class="col-md-3">
        <button type="submit" class="btn btn-outline-success btn-lg">
          Search
        </button>
      </div>
    </div>
    <p class="mb-0">
      <b>Advanced Search Preferences</b
      ><i class="fa-solid fa-angle-down adv-search-btn"></i>
    </p>

    <div class="mx-auto adv-search-div adv-search-form-h">
      <div class="mb-3 form-check form-check-inline">
        <input
          class="form-check-input"
          type="checkbox"
          name="indoor"
          value="1"
          id="indoorCheckbox"
        />
        <label class="form-check-label" for="indoorCheckbox"
          >indoor plants</label
        >
      </div>
      <div class="mb-3 form-check form-check-inline">
        <input
          class="form-check-input"
          type="checkbox"
          name="edible"
          value="1"
          id="edibleCheckbox"
        />
        <label class="form-check-label" for="edibleCheckbox"
          >edible plants</label
        >
      </div>

      <!-- radio group watering -->
      <div class="row">
        <div class="col-md-6">
          <p class="mb-0"><b>Watering Frequency</b></p>
          <div class="form-check watering">
            <input
              class="form-check-input"
              type="radio"
              name="watering"
              id="wateringFrequent"
              value="frequent"
            />
            <label class="form-check-label" for="wateringFrequent">
              Frequent
            </label>
          </div>
          <div class="form-check watering">
            <input
              class="form-check-input"
              type="radio"
              name="watering"
              id="wateringAverage"
              value="average"
            />
            <label class="form-check-label" for="wateringAverage">
              Average
            </label>
          </div>
          <div class="form-check watering">
            <input
              class="form-check-input"
              type="radio"
              name="watering"
              id="wateringMinimum"
              value="minimum"
            />
            <label class="form-check-label" for="wateringMinimum">
              Minimum
            </label>
          </div>
          <div class="form-check watering">
            <input
              class="form-check-input"
              type="radio"
              name="watering"
              id="wateringNone"
              value="none"
            />
            <label class="form-check-label" for="wateringNone"> None </label>
          </div>
        </div>
        <!-- radio group sunlight -->
        <div class="col-md-6">
          <p class="mb-0"><b>Sunniness</b></p>
          <div class="form-check sunlight">
            <input
              class="form-check-input"
              type="radio"
              name="sunlight"
              id="fullSun"
              value="full_sun"
            />
            <label class="form-check-label" for="fullSun"> Full Sun </label>
          </div>
          <div class="form-check sunlight">
            <input
              class="form-check-input"
              type="radio"
              name="sunlight"
              id="sun-partShade"
              value="sun-part_shade"
            />
            <label class="form-check-label" for="sun-partShade">
              Sun with Some Shade
            </label>
          </div>
          <div class="form-check sunlight">
            <input
              class="form-check-input"
              type="radio"
              name="sunlight"
              id="partShade"
              value="part_shade"
            />
            <label class="form-check-label" for="partShade"> Part Shade </label>
          </div>
          <div class="form-check sunlight">
            <input
              class="form-check-input"
              type="radio"
              name="sunlight"
              id="fullShade"
              value="full_shade"
            />
            <label class="form-check-label" for="fullShade"> Full Shade </label>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
<!-- ******************our picks*********** -->
<!-- special note: plant.id is being set from api so id refers to api_id -->
{% if g.user.pref_indoor or g.user.pref_sunlight or g.user.pref_watering or
g.user.pref_edible%}
<h4 class="text-start">our picks based on your preferences:</h4>
{% else %}
<h4 class="text-start">our picks:</h4>
{% endif %}
<div class="row row-cols-1 row-cols-md-3 g-4">
  {% for plant in plants %}
  <div class="col">
    <div class="card" id="{{plant.id}}" style="width: 18rem; height: 21rem">
      {% if plant.default_image.thumbnail %}
      <img
        class="card-img-top img-thumbnail"
        src="{{plant.default_image.thumbnail}}"
        alt="picture of {{plant.common_name}}"
      />
      {% else %}
      <img
        class="card-img-top img-thumbnail"
        src="https://upload.wikimedia.org/wikipedia/commons/d/d1/Image_not_available.png?20210219185637"
        alt="no image available logo for {{plant.common_name}}"
      />
      {% endif %}

      <div class="card-img-overlay">
        <form class="like" action="">
          {% if g.user.favorites %} {% for faved_plant in g.user.favorites %} {%
          if plant.id == faved_plant.api_id %}
          <button
            id="{{plant.id}}"
            role="submit"
            class="btn btn-light btn-sm rounded-circle fave-btn faved"
          >
            <i class="fa-solid fa-heart"></i>
          </button>

          {% endif %} {% endfor %} {% else %}
          <button
            class="btn btn-light btn-sm rounded-circle fave-btn unfaved"
            id="{{plant.id}}"
            role="submit"
          >
            <i class="fa-solid fa-heart"></i>
          </button>
          {% endif %}
        </form>
      </div>
      <div class="card-body text-center z-3 overflow-auto">
        <a href="{{url_for('show_plant', plant_id=plant.id)}}">
          <h5 class="card-title">{{plant.common_name.title()}}</h5></a
        >
      </div>
    </div>
  </div>
  {% endfor %}
</div>

{% endblock %}
